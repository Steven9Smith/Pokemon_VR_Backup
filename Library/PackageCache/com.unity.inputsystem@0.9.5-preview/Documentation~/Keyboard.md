# Keyboard Support

The [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html) class defines a [device](Devices.md) with a set of keys controls defined by the [`Key`](../api/UnityEngine.InputSystem.Key.html) enumeration.

The location of individual keys is agnostic to keyboard layout meaning that, for example, the `A` key is always the key to the right of the `Caps Lock` key regardless of where the currently active language layout places the key that generates an `A` character (if the layout even has a key assigned to that character).

To query which (if any) character is generated by given key, use the key's [`displayName`](../api/UnityEngine.InputSystem.InputControl.html#UnityEngine_InputSystem_InputControl_displayName) property. The value of the property will change automatically when the keyboard layout is changed at the system level.

Keys can be looked up by their produced character using [control paths](Controls.md#control-paths). For example, the key producing the "a" character can be queried from [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html) using [`Keyboard.current["#(a)"]`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_Item_UnityEngine_InputSystem_Key_).

>NOTE: We do not yet support on-screen keyboards in the new input system. For now, please Unity's existing API in `UnityEngine.TouchScreenKeyboard`.

## Controls

A given key can be retrieved from [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html) using either one of the accessor properties (e.g. [`Keyboard.spaceKey`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_spaceKey)) or using [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html)'s indexer and the [`Key`](../api/UnityEngine.InputSystem.Key.html) enumeration (e.g. `keyboard[Key.Space]`.

Look at the [scripting API reference for the `Keyboard` class](../api/UnityEngine.InputSystem.Keyboard.html) to look up all the properties for the individual key controls.

Two special controls worth pointing out here are the [`anyKey`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_anyKey) and the [`imeSelected`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_imeSelected) controls, both of which don't directly map to individual keys.
 [`anyKey`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_anyKey) is a [synthetic](Controls.md#synthetic-controls) button control which will report whether any key on the keyboard is pressed.

[`imeSelected`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_imeSelected) will report whether [IME](#ime) text processing is enabled or not.

## Text Input

It is recommended to not manually translate text input from key presses by trying to trying to string together the characters corresponding to the keys. Instead, to listen to text input, hook into [`Keyboard.onTextInput`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_onTextInput). This will deliver character-by-character input as reported by the platform (including input from on-screen keyboards).

Note that the text input API does not allocate GC memory as it does not deliver fully composed strings.

## Keyboard Layouts

The name of the current keyboard layout can be queried with [`Keyboard.keyboardLayout`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_keyboardLayout). Note that the names are platform-specific.

There is no support for setting keyboard layouts from the application.

To monitor for when the keyboard layout changes, hook into [`InputSystem.onDeviceChange`](../api/UnityEngine.InputSystem.InputSystem.html#UnityEngine_InputSystem_InputSystem_onDeviceChange) and check for [`InputDeviceChange.ConfigurationChanged`](../api/UnityEngine.InputSystem.InputDeviceChange.html) on a [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html) device.

## IME

Some writing systems (for instance several east asian scripts) are too complex to represent all characters as individual keys on a keyboard. In those cases, operating systems implement IMEs (Input Method Editors) to allow composing input strings by other methods, for instance by typing several keys to produce a single character. When using Unity's UI frameworks for text input, these will take care of handling IME for you, so you don't need to deal with this. However, when you are building your own UI for text input, the [`Keyboard`](../api/UnityEngine.InputSystem.Keyboard.html) class lets you work with input from IMEs using the following APIs:

* [`imeSelected`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_imeSelected) is a virtual input control, which will report whether IME text processing is enabled or not.

* [`SetIMEEnabled()`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_SetIMEEnabled_System_Boolean_) is a method which lets you turn IME processing on or off. Typically, IME processing is desirable when the user wants to edit text, but not so much when the user is using the keyboard to control a game.

* [`SetIMECursorPosition()`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_SetIMECursorPosition_Vector2_). IMEs may open system windows which let users interactively edit the text they want to input. These are expected to open up next to the UI used for text editing. You can use the [`SetIMECursorPosition()`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_SetIMECursorPosition_Vector2_) method to tell the OS where that  is.

* [`onIMECompositionChange`](../api/UnityEngine.InputSystem.Keyboard.html#UnityEngine_InputSystem_Keyboard_onIMECompositionChange) is an event you can subscribe to to receive any updates to the IME composition string. The composition string is the text input the user is currently editing using an IME. It is expected that any UI dealing with text input displays this text (with some visual indication of it being actively edited, usually an underline) at the current text input cursor position.
